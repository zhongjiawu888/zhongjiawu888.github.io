---
layout: life
category : Programming Life
duoshuo: true
date: 2016-08-03
title: 心酸史之随机数和unsign int
---

	作者: MrZhong
	时间: 2016年8月3日
	版本: 0.0.1

-----------


这两天写个if都不知如何敲起，if不下去，

不是不在状态，而是我蒸滴脑袋卡壳了o(╯□╰)o

有一个功能，类似要写一个这样的算法：
在一个长度为n(6)的数组里随机选出 其m（4）个不相同的值，并且这些值不能为数组中的某个值(K)。
例如：
int arr[6]={1,2,3,4,5,6}，随机生成里面的4个值，生成的这4个值不能是K=3.

刚开始也是正常的思路：
首先随机出一个值randomNum1，放入到vector中，循环比较vector中的值是否等于arr[i]并且不等于K，如果是，则重新随机，如果不是，则放入到vector中，直到vector的size为4跳出循环。

按照这种思路，用whlie 或for，里面的逻辑不管怎么改，怎么改，发现虽然循环的长度不是很大，才6，但是每次好久才能得到随出最后的值，效率很低。

 纠结了好久，发现使用标准库random_shuffle的随机打乱排序，就选其前4个值作为随机的4个值，然后将A与这4个值比较，如果相等，则将第5个值（当然可以是第四个后的任意一个）直接替换它，就得到了最终要的4个值。效率非常快。以下代码：

 ```sh
    std::vector<int> vArr;
    for (int i = 0;i<6;i++)
    {
        vArr.push_back(i);
    }
    random_shuffle(vArr.begin(), vArr.end());

    int awrdIdx = 3;//即K
    for(int i = 0;i<4;i++)
    {
        if (vArr[i] == awrdIdx)
        {
            vArr[i] = vArr[5];
        }
        CCLog("%d",vArr[i]);
    }

```
  例外个很坑问题搞了我2个小时。之前无符号和有符号整形一直不太注意，被忽视，今天终于尝尽苦头。结算积分的时候有正负，我把3个变量直接相加的表达式作为一个函数参数，3个变量中有unsign int 和 int，结果纳闷算出来的值18446744，一直想想想不知道错在哪了。真的是百爪挠心。日了狗了。以下是修正后的代码截图，算是留个原罪吧。
![](/images/studyRes/3.jpg)

**************

